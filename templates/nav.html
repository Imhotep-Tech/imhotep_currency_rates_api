<nav class="w-full bg-white border-b border-gray-200">
    <div class="mx-auto w-full max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex h-14 items-center justify-between">
            <a href="/home" class="flex items-center gap-2">
                <span class="text-base font-semibold tracking-tight">Imhotep API</span>
            </a>
            <div class="hidden md:flex items-center gap-6">
                <a href="/home" class="text-sm text-gray-700 hover:text-gray-900">Home</a>
                <details class="relative group">
                    <summary class="list-none cursor-pointer text-sm text-gray-700 hover:text-gray-900 flex items-center gap-1">
                        Settings
                        <i class="fa-solid fa-chevron-down text-[10px] transition-transform group-open:rotate-180"></i>
                    </summary>
                    <ul class="absolute right-0 mt-2 w-48 rounded-md border border-gray-200 bg-white shadow-lg py-1 z-50 hidden group-open:block">
                        <li>
                            <a href="/settings/personal_info" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-50">Personal Info</a>
                        </li>
                        <li>
                            <a href="/settings/security_check" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-50">Change Password</a>
                        </li>
                    </ul>
                </details>
                <a href="/logout" class="inline-flex items-center rounded-md bg-blue-600 px-3 py-1.5 text-sm font-medium text-white shadow-sm hover:bg-blue-700">
                    Logout
                </a>
            </div>
            <div class="flex items-center gap-4 md:gap-6">
                <p class="hidden sm:block text-sm text-gray-600">Name: {{ user_username }}</p>
                <button id="mobile-menu-button" class="md:hidden inline-flex items-center justify-center rounded-md p-2 text-gray-600 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <span class="sr-only">Open main menu</span>
                    <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div id="mobile-menu" class="md:hidden border-t border-gray-200 hidden">
        <div class="space-y-1 px-4 py-3">
            <p class="block px-2 py-1 text-sm text-gray-600">Name: {{ user_username }}</p>
            <a href="/home" class="block rounded-md px-2 py-2 text-sm text-gray-700 hover:bg-gray-50">Home</a>
            <details class="px-2">
                <summary class="cursor-pointer rounded-md py-2 text-sm text-gray-700 hover:bg-gray-50">Settings</summary>
                <ul class="mt-1 ml-3 space-y-1">
                    <li><a href="/settings/personal_info" class="block rounded-md px-2 py-2 text-sm text-gray-700 hover:bg-gray-50">Personal Info</a></li>
                    <li><a href="/settings/security_check" class="block rounded-md px-2 py-2 text-sm text-gray-700 hover:bg-gray-50">Change Password</a></li>
                </ul>
            </details>
            <a href="/logout" class="block rounded-md bg-blue-600 px-2 py-2 text-sm font-medium text-white hover:bg-blue-700">Logout</a>
        </div>
    </div>

    <script>
    (function(){
        var btn = document.getElementById('mobile-menu-button');
        var menu = document.getElementById('mobile-menu');
        if(btn && menu){
            btn.addEventListener('click', function(){
                if(menu.classList.contains('hidden')){
                    menu.classList.remove('hidden');
                } else {
                    menu.classList.add('hidden');
                }
            });
        }
    })();
    </script>
</nav>